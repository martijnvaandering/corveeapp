<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <h1>Dit is de super vette Corvee app!</h1>
    <p>Huidige gebruikers:</p>
    <ul id="gebruikers"></ul>
    <input type="text" name="Naam" value=""  placeholder="Voer hier je nieuwe huisgenoot toe." />
    <button onclick="saveUser()">Opslaan</button>
    <script>
        fetch("/api/gebruiker")
            .then(a => a.json())
            .then(a => a.forEach(g => document.getElementById("gebruikers").innerHTML += "<li>" + g + "</li>"));

        function saveUser() {
            var user = document.getElementsByName("Naam")[0].value;
            fetch("/api/gebruiker", {
                method: "POST",
                headers: {
                    "Content-type": "application/json; charset=UTF-8"
                },
                body: JSON.stringify({
                    Naam: user
                })
            }).then(a => {
                    alert("Succesvol opgeslagen!");
                    window.location.reload();
                });
        }
    </script>
</body>
</html>